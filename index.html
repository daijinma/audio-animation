<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        !function(e,t){function i(){var t=r.getBoundingClientRect().width,i=t/16;r.style.fontSize=i+"px",window.fontRatio=i,s.rem=e.rem=i}var a,n=e.document,r=n.documentElement,o=n.querySelector('meta[name="viewport"]'),l=n.querySelector('meta[name="flexible"]'),m=0,d=0,s=t.flexible||(t.flexible={});if(o){console.warn("将根据已有的meta标签来设置缩放比例");var p=o.getAttribute("content").match(/initial\-scale=([\d\.]+)/);p&&(d=parseFloat(p[1]),m=parseInt(1/d))}else if(l){var c=l.getAttribute("content");if(c){var u=c.match(/initial\-dpr=([\d\.]+)/),f=c.match(/maximum\-dpr=([\d\.]+)/);u&&(m=parseFloat(u[1]),d=parseFloat((1/m).toFixed(2))),f&&(m=parseFloat(f[1]),d=parseFloat((1/m).toFixed(2)))}}if(!m&&!d){var v=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),h=e.devicePixelRatio;m=v?h>=3&&(!m||m>=3)?3:h>=2&&(!m||m>=2)?2:1:1,d=1/m}if(r.setAttribute("data-dpr",m),!o)if(o=n.createElement("meta"),o.setAttribute("name","viewport"),o.setAttribute("content","initial-scale="+d+", maximum-scale="+d+", minimum-scale="+d+", user-scalable=no"),r.firstElementChild)r.firstElementChild.appendChild(o);else{var x=n.createElement("div");x.appendChild(o),n.write(x.innerHTML)}e.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(i,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(a),a=setTimeout(i,300))},!1),"complete"===n.readyState?n.body.style.fontSize=12*m+"px":n.addEventListener("DOMContentLoaded",function(e){n.body.style.fontSize=12*m+"px"},!1),i(),s.dpr=e.dpr=m,s.refreshRem=i,s.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},s.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))
    </script>
    <style>
        *{padding:0;margin:0;}
        a{cursor: pointer;}
        canvas{
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="app">

        <a onClick=play()>play()</a>  
    
        <a onClick=destroy()>destroy()</a>  


        <a onClick=play2()>play2()</a>  
    
         <a onClick=destroy2()>destroy2()</a>  
    </div>
    <script src="./bundle.js"></script>
    

    
    <script>
        var am = null;
        var am2 = null;
        window.onload = function(){
            let w = window.innerWidth;
            let h = w/2.5;

            am = new AudioMap({
                container: document.body,
                // 或者 ctx 
                width: w,
                height: h,
                url:"./SuperMario.mp3",
                lines: [
                    [-2, 'rgba(74, 74, 74, 0.2)', 1],
                    [-6, 'rgba(74, 74, 74, 0.4)', 1],
                    [4, 'rgba(74, 74, 74, 0.5)', 1],
                    [2, 'rgba(74, 74, 74, 0.6)', 1],
                    [1, 'rgba(74, 74, 74, 0.5)', 2],
                ] 
            });

            am2 = new AudioMap({
                container: document.body,
                width: w,
                height: h,
                url:"http://cdn.inyuapp.com/audios/20181112150440w9srJD.m4a",
                lines: [
                    [-2, 'rgba(173,173,173, 0.4)'],
                    [-6, 'rgba(173,173,173, 0.6)'],
                    [4, 'rgba(173,173,173, 0.8)'],
                    [2, 'rgba(173,173,173, 1)'],
                    [1, '#adadad', 2],
                ] 
            });
        }
        
        // am.load("http://cdn.inyuapp.com/audios/20181112150440w9srJD.m4a");
        // am.load("./SuperMario.mp3");


        function play(){
            am.play()
        }
        function destroy(){
            am.destroy()
        }

        function play2(){
            am2.play()
        }
        function destroy2(){
            am2.destroy()
        }
    </script>
</body>
</html>